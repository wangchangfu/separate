//>>built
define("dojox/app/controllers/Layout","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/query dojo/dom-geometry dojo/dom-attr dojo/dom-style dijit/registry ./LayoutBase ../utils/layout ../utils/constraints".split(" "),function(n,p,m,g,q,h,k,l,d,r,s,t){return n("dojox.app.controllers.Layout",r,{constructor:function(a,b){},onResize:function(){this._doResize(this.app);this.resizeSelectedChildren(this.app)},resizeSelectedChildren:function(a){for(var b in a.selectedChildren)a.selectedChildren[b]&&
(this.app.log("in Layout resizeSelectedChildren calling resizeSelectedChildren calling _doResize for w.selectedChildren[hash].id\x3d"+a.selectedChildren[b].id),this._doResize(a.selectedChildren[b]),m.forEach(a.selectedChildren[b].domNode.children,function(a){d.byId(a.id)&&d.byId(a.id).resize&&d.byId(a.id).resize()}),this.resizeSelectedChildren(a.selectedChildren[b]))},initLayout:function(a){this.app.log("in app/controllers/Layout.initLayout event\x3d",a);this.app.log("in app/controllers/Layout.initLayout event.view.parent.name\x3d[",
a.view.parent.name,"]");a.view.parent.domNode.appendChild(a.view.domNode);k.set(a.view.domNode,"data-app-constraint",a.view.constraint);this.inherited(arguments)},_doResize:function(a){var b=a.domNode;if(b){var c={};if(!("h"in c)||!("w"in c))c=p.mixin(h.getMarginBox(b),c);if(a!==this.app){var e=l.getComputedStyle(b),f=h.getMarginExtents(b,e),d=h.getBorderExtents(b,e),c=a._borderBox={w:c.w-(f.w+d.w),h:c.h-(f.h+d.h)},f=h.getPadExtents(b,e);a._contentBox={l:l.toPixelValue(b,e.paddingLeft),t:l.toPixelValue(b,
e.paddingTop),w:c.w-f.w,h:c.h-f.h}}else a._contentBox={l:0,t:0,h:g.global.innerHeight||g.doc.documentElement.clientHeight,w:g.global.innerWidth||g.doc.documentElement.clientWidth};this.inherited(arguments)}else this.app.log("Warning - View has not been loaded, in Layout _doResize view.domNode is not set for view.id\x3d"+a.id+" view\x3d",a)},layoutView:function(a){a.view&&(this.inherited(arguments),this._doResize(a.parent||this.app),this._doResize(a.view))},_doLayout:function(a){if(a){this.app.log("in Layout _doLayout called for view.id\x3d"+
a.id+" view\x3d",a);var b,c=t.getSelectedChild(a,a.constraint);c&&c.isFullScreen?console.warn("fullscreen sceen layout"):(b=q("\x3e [data-app-constraint]",a.domNode).map(function(a){var b=d.getEnclosingWidget(a);return b?(b._constraint=k.get(a,"data-app-constraint"),b):{domNode:a,_constraint:k.get(a,"data-app-constraint")}}),c&&(b=m.filter(b,function(a){return a.domNode&&a._constraint},a)));a._contentBox&&s.layoutChildren(a.domNode,a._contentBox,b)}else console.warn("layout empty view.")}})});